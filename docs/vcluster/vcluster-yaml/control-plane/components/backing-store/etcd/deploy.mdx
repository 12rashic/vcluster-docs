---
title: External etcd
sidebar_label: deploy
sidebar_position: 3
description: Configure an external etcd instance as the virtual cluster's backing store.
---

import ConfigReference from '@site/docs/_partials/config/controlPlane/backingStore/etcd/deploy.mdx'

Enabling this option will deploy [etcd](https://etcd.io/) on the host cluster in the same namespace as the virtual cluster and configure the control plane to use it as the backing store. etcd will be deployed with a `StatefulSet`, `Service`, and headless `Service`.
```yaml
controlPlane:
  backingStore:
    etcd:
      deploy:
        enabled: true
        ...
```

The `StatefulSet` use to deploy etcd can be customized. One of the more common customizations is to set resource requests:
```yaml
controlPlane:
  backingStore:
    etcd:
      deploy:
        enabled: true
        statefulSet:
          resources:
            requests:
              cpu: 20m
              memory: 150Mi
```

Optional annotations can be added to each etcd component.
```yaml
controlPlane:
  backingStore:
    etcd:
      deploy:
        enabled: true
        statefulSet:
          annotations:
            app.kubernetes.io/part-of: "etcd"
            cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
        service:
          annotations:
            app.kubernetes.io/part-of: "etcd"
        headlessService:
          annotations:
            app.kubernetes.io/part-of: "etcd"


```

## Config reference

<ConfigReference/>

