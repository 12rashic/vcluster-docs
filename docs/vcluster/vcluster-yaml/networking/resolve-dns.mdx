---
title: Resolve DNS
sidebar_label: resolveDNS
sidebar_class_name: pro
sidebar_position: 2
---

import ResolveDNS from '@site/docs/_partials/config/networking/resolveDNS.mdx'

This feature enables adding custom DNS rules to the virtual cluster to allow communication with services deployed in the host cluster and across services in separate vCluster instances.

## Examples

### Mapping a Hostname

This is purely a URL based mapping – mapping one `hostname` inside the vCluster to another `hostname`.
Hence DNS lookups of `wikipedia.com` would return a DNS response with answer as `en.wikipedia.org`.

```yaml
networking:
  resolveDNS:
    - hostname: wikipedia.com
      target:
        hostname: en.wikipedia.org
```

### Mapping a virtual cluster service to a host cluster service

This example maps `my-namespace/my-svc` inside the vCluster to `dns-test/nginx-svc` in the host cluster.  In this case, the DNS response is the service IP of the `nginx-svc` in the `dns-test` namespace of the host cluster.

```yaml
networking:
  resolveDNS:
    - service: my-namespace/my-svc
      target:
        hostService: dns-test/nginx-svc
```

### Mapping services across vCluster instances

This is an example mapping a service inside vCluster to another service in a separate vCluster. In this case, as specified with `vClusterService` – the target service is in another vCluster.
Here the service `my-ns-in-vcluster/my-svc-vcluster` is mapped to  `dns-test-in-vcluster-ns/test-in-vcluster-service` in
a vCluster named `test-vcluster` deployed in the host namespace `test-vcluster-ns`.

```yaml
networking:
  resolveDNS:
    - service: my-ns-in-vcluster/my-svc-vcluster
      target:
        vClusterService: test-vcluster-ns/test-vcluster/dns-test-in-vcluster-ns/test-in-vcluster-service
```

### Mapping whole namespaces

Mapping all services under a particular vCluster namespace to a host namespace. This host namespace could also contain another vCluster, thereby mapping all vCluster services to another vCluster.
```yaml
networking:
  resolveDNS:
    - namespace: test-in-vcluster-ns
      target:
        hostNamespace: external-vc-ns
```

Here, all services in the target namespace `test-in-vcluster-ns` of the vCluster `test-vcluster` are mapped to a namespace
`external-vc-ns`.
You can visualize it as:

```
    ┌──────────────────────┐┌──────────────────────────────┐
    │nginx.external-vc-ns  ││nginx.test-in-vcluster-ns     │
    │svcA.external-vc-ns   ││svcA.test-in-vcluster-ns      │
    │svcB.external-vc-ns   ││svcB.test-in-vcluster-ns      │
    │...                   ││...                           │
    └──────────────────────┘└──────────────────────────────┘

```

## Config reference

<ResolveDNS/>
