---
title: Nodes
sidebar_label:  nodes
sidebar_position: 1
description: Configuration for ...
---

import SyncNodes from '@site/docs/_partials/config/sync/fromHost/nodes.mdx'


{/*
`nodes.enabled`:
- covered by the generic section here: https://www.vcluster.com/docs/syncer/config#enable-or-disable-synced-resources
- exists from the beginning. I believe one would need this to schedule any pods
- may be possible to disable this in the "control plane" vCluster when using [Isolated Control Plane](https://www.vcluster.com/pro/docs/features/isolated_control_planes), where all the workloads are scheduled to the workload cluster (where nodes syncing would be enabled)

`nodes.syncBackChanges`:
- replaces deprecated flag `--sync-node-changes`
- enables syncing labels and taints from virtual cluster nodes to the host nodes
- requires adding rbac permissions to modify the host node & status

`nodes.clearImageStatus`:
- sets `--node-clear-image-status`, added with this PR: https://github.com/loft-sh/vcluster/pull/826
- description says it's to prevent information about the node from leaking in a multi-tenant environment

`nodes.selector.all`:
- sets `--sync-all-nodes` syncer flag, see also [Example: Sync All Nodes](https://www.vcluster.com/docs/architecture/nodes#example-sync-all-nodes)

`nodes.selector.labels`:
- selects node labels that will be synced to the vCluster. This allows controlling which nodes can be used by the vCluste
- Some example use cases:
  - only allow nodes in a region
  - only allow nodes with a particular architecture
  - only use spot instances
  - prevent vClusters from sharing resources with critical infrastructure
*/}

By default, vCluster syncs psuedo nodes from the host cluster where there are virtual cluster pods running. Pseudo nodes will only have real values for the CPU, architecture and operating system while everything else will be randomly generated. A single pseudo node can either represent a single real node on the host cluster or it can represent multiple real nodes. If there are no more pods on a node, vCluster deletes the pseudo node. 

However, when vCluster users need to access specific node information, you can choose to sync the real nodes from the host cluster to the virtual cluster which requires a cluster role.

See [Nodes](/architecture/nodes.mdx) for more information.


### Sync pseudo nodes
Sync pseudo nodes to the virtual cluster (default). This default configuration does not require a cluster role:
```YAML
sync:
  fromHost:
    nodes:
      enabled: false
```

### Sync real nodes
Sync real nodes to the virtual cluster where virtual cluster pods are running:
```YAML
sync:
  fromHost:
    nodes:
      enabled: true
```

### Sync pseudo nodes with label selector
Sync pseudo nodes nodes that match a given label selector. This will also set the node selector when syncing a pod from virtual cluster to host cluster to the same values specified here:
```YAML
sync:
  fromHost:
    nodes:
      enabled: false
      selector:
        labels:
          environment: production
          team: backend
```

### Sync real nodes with label selector
Sync real nodes nodes that match a given label selector. This will also set the node selector when syncing a pod from virtual cluster to host cluster to the same values specified here:
```YAML
sync:
  fromHost:
    nodes:
      enabled: true
      selector:
        labels:
          environment: production
          team: backend
```

### Sync All Real Nodes 
Sync all real nodes, regardless of whether a virtual cluster pod is running on it or not:
```YAML
sync:
  fromHost:
    nodes:
      enabled: true
      selector:
        all: true
```

## Config reference

<SyncNodes/>

